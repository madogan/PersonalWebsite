---
description: When committing or deciding to commit.
alwaysApply: false
---
# Commit Rules for Plutony Web Project

## üéØ Core Principles

1. **Atomic Commits**: Each commit should represent one logical change
2. **Semantic Versioning**: Follow SemVer for version numbers (MAJOR.MINOR.PATCH)
3. **Consistent Context**: All files in a commit should be related to the same change
4. **Clear Messages**: Use standardized commit message format
5. **Traceable Changes**: Link commits to issues/tasks when applicable

## üìù Commit Message Format

### Basic Structure

```bash
<type>(<scope>): <subject>

[optional body]

[optional footer]
```

### Types

- **feat**: New feature or significant enhancement
- **fix**: Bug fix
- **docs**: Documentation changes only
- **style**: Code style changes (formatting, missing semicolons, etc.)
- **refactor**: Code changes that neither fix a bug nor add a feature
- **perf**: Performance improvements
- **test**: Adding or modifying tests
- **chore**: Build process, tooling changes, dependency updates
- **ci**: CI/CD pipeline changes
- **revert**: Reverting a previous commit

### Scope

- Specific area of the codebase affected
- Use lowercase
- Examples: auth, ui, api, db, cache

### Subject

- Imperative mood ("add" not "added" or "adds")
- No period at the end
- Maximum 72 characters
- Start with lowercase

### Examples

```
feat(auth): implement email verification flow
fix(ui): resolve button hover state in dark mode
docs(api): update authentication endpoints documentation
style(components): apply consistent code formatting
refactor(db): optimize database queries
perf(cache): improve caching strategy
test(auth): add unit tests for login flow
chore(deps): update dependencies to latest versions
```

## üîÑ Semantic Versioning

### Version Format: MAJOR.MINOR.PATCH

- **MAJOR**: Breaking changes (incompatible API changes)
- **MINOR**: New features (backward-compatible)
- **PATCH**: Bug fixes (backward-compatible)

### Version Examples

```
1.0.0 - Initial stable release
1.1.0 - Added new feature
1.1.1 - Bug fix
2.0.0 - Breaking change
```

## üì¶ Atomic Commits

### What Makes a Good Atomic Commit

1. **Single Purpose**: One logical change per commit
2. **Self-Contained**: All necessary changes included
3. **Testable**: Can be tested independently
4. **Reversible**: Can be reverted without side effects

### Examples of Good Atomic Commits

‚úÖ **Good**:

```
feat(auth): add password reset functionality
- Add reset password API endpoint
- Create reset password form component
- Add email service for reset links
- Update auth documentation
```

‚úÖ **Good**:

```
refactor(db): optimize user queries
- Update user repository methods
- Add database indexes
- Update affected services
```

‚ùå **Bad**:

```
chore: various updates
- Fix login bug
- Update dependencies
- Add new feature
- Change styling
```

## üîç Commit Context

### File Grouping Rules

1. **Related Changes**: All files should be part of the same logical change
2. **Feature Scope**: Keep changes within a single feature/component
3. **Layer Consistency**: Group changes by architectural layer

### Examples of Good Context

‚úÖ **Good Context**:

```
feat(auth): implement OAuth login
Modified files:
- app/lib/auth/oauth-provider.ts
- app/lib/auth/oauth-types.ts
- app/ui/components/oauth-buttons.tsx
- app/api/auth/[...nextauth]/route.ts
```

‚úÖ **Good Context**:

```
style(components): standardize button styles
Modified files:
- app/ui/components/button.tsx
- app/ui/components/icon-button.tsx
- app/lib/design-system.ts
```

‚ùå **Bad Context**:

```
fix: various updates
Modified files:
- app/ui/components/button.tsx
- app/lib/database.ts
- app/api/users/route.ts
- docs/README.md
```

## üìã Pre-Commit Checklist

1. **Code Quality**:
   - Run linters and formatters
   - Pass all tests
   - No debug code (console.log, etc.)

2. **Commit Content**:
   - Single logical change
   - Related files only
   - Proper scope identified

3. **Message Format**:
   - Correct type and scope
   - Clear description
   - Proper formatting

4. **Documentation**:
   - Update relevant docs
   - Add comments if needed
   - Update CHANGELOG.md

## üîÑ Version Management

### When to Bump Versions

1. **MAJOR (2.0.0)**:
   - Breaking API changes
   - Major UI overhauls
   - Database schema changes
   - Dropping support for older versions

2. **MINOR (1.1.0)**:
   - New features
   - New components
   - Non-breaking enhancements
   - Deprecation notices

3. **PATCH (1.0.1)**:
   - Bug fixes
   - Performance improvements
   - Documentation updates
   - Minor dependency updates

### Version Update Process

1. Update version in:
   - package.json
   - app/lib/constants.ts
   - CHANGELOG.md

2. Create version commit:

   ```
   version: X.Y.Z
   ```

3. Tag the release:

   ```
   git tag -a vX.Y.Z -m "Version X.Y.Z"
   ```

## üìö CHANGELOG Management

### CHANGELOG.md Format

```markdown
# Changelog

## [Unreleased]

### Added
- New features

### Changed
- Non-breaking changes

### Deprecated
- Soon-to-be removed features

### Removed
- Removed features

### Fixed
- Bug fixes

### Security
- Security fixes

## [1.0.0] - YYYY-MM-DD
...
```

### Update Rules

1. Add changes to "Unreleased" section
2. Group by type (Added, Changed, etc.)
3. Move to version section when releasing
4. Include PR/Issue references

## üö´ Common Mistakes to Avoid

1. **Mixed Concerns**:
   - Mixing features and fixes
   - Combining unrelated changes
   - Including irrelevant files

2. **Poor Messages**:
   - Vague descriptions
   - Missing type/scope
   - Non-standard formatting

3. **Wrong Versioning**:
   - Incorrect version bumps
   - Missing version updates
   - Inconsistent versioning

4. **Bad Timing**:
   - Too large commits
   - Too frequent commits
   - Incomplete changes

## üîç Review Process

### Before Committing

1. **Review Changes**:

   ```bash
   git diff
   git status
   ```

2. **Check Format**:

   ```bash
   pnpm check
   ```

3. **Run Tests**:

   ```bash
   pnpm test
   ```

### After Committing

1. **Verify Commit**:

   ```bash
   git show
   git log -p
   ```

2. **Check History**:

   ```bash
   git log --oneline
   ```

Remember: Quality commits make for a maintainable codebase. Take the time to craft proper commits and maintain a clear history.
description:
globs:
alwaysApply: false
---
